#!/bin/sh -e
#  mount disk

lsblk -Po name,size,mountpoint,fstype,label | while read -r a; do
	eval "$a"

	[ "$FSTYPE" ] && [ ! "$MOUNTPOINT" ] &&
		printf "%-4s - %s %s %s\n" \
		"$NAME" \
		"$SIZE" \
		"$FSTYPE," \
		"${LABEL:-unnamed}"

done | menu -p mount | {
	read -r disk _
	eval "$(lsblk -Polabel "/dev/$disk")"
	[ "$LABEL" = Windows ] && dir=/win || dir=$HOME/dev/$disk
	mkdir -p "$dir"
	sudo mount -o "umask=000"  "/dev/$disk"  "$dir"
	notify-send "mounted $disk ($LABEL)"  "[$dir]"
}
